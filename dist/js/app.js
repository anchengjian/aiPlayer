!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){t.exports=n(14)},function(t,e,n){t.exports=!n(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(19),o=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(4),i=n(2),o=n(26),u=n(30),c="prototype",a=function(t,e,n){var s,l,f,p=t&a.F,d=t&a.G,h=t&a.S,y=t&a.P,v=t&a.B,g=t&a.W,m=d?i:i[e]||(i[e]={}),b=m[c],x=d?r:h?r[e]:(r[e]||{})[c];d&&(n=e);for(s in n)l=!p&&x&&void 0!==x[s],l&&s in m||(f=l?x[s]:n[s],m[s]=d&&"function"!=typeof x[s]?n[s]:v&&l?o(f,r):g&&x[s]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[c]=t[c],e}(f):y&&"function"==typeof f?o(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[s]=f,t&a.R&&b&&!b[s]&&u(b,s,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(23),i=n(31),o=n(43),u=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return u(t,e,n)}catch(c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(10),i=n(8);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";n(47),n(15)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(17),o=r(i);window.aiPlayer=new o["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r=void 0;if(Array.isArray(e))e.map(function(e,r){return i(t+"["+(e+"")+"]",e,n)});else if("[object Object]"===Object.prototype.toString.call(e))for(r in e)i(t+"["+r+"]",e[r],n);else n(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),u=r(o),c=n(6),a=r(c),s=n(7),l=r(s),f=function(){function t(){(0,a["default"])(this,t)}return(0,l["default"])(t,[{key:"$",value:function(){var t;return(t=document).querySelector.apply(t,arguments)}},{key:"$$",value:function(){var t;return(t=document).querySelectorAll.apply(t,arguments)}},{key:"initLoading",value:function(t){var e=t.querySelectorAll(".spinner")[0];if(e)return e;var n=document.createElement("div");return n.className="spinner",n.innerHTML='<div class="bounce"></div><div class="bounce"></div><div class="bounce"></div>',t.insertBefore(n,t.firstChild),t.querySelectorAll(".spinner")[0]}},{key:"hideLoading",value:function(){var t=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0],e=this.initLoading(t);e.classList.add("hidden")}},{key:"showLoading",value:function(){var t=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0],e=this.initLoading(t);e.classList.remove("hidden")}},{key:"serialization",value:function(t){function e(t,e){e="function"==typeof e?e():e+"",r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)}var n=void 0,r=[];if(Array.isArray(t))t.map(function(t,n){return e(n,t)});else for(n in t)i(n,t[n],e);return r.join("&")}},{key:"ajax",value:function(t){if(!t.hasOwnProperty("url"))return!1;var e=new XMLHttpRequest,n={type:"get",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},data:null},r=(0,u["default"])(n,t);r.data=r.data&&this.serialization(r.data),e.addEventListener("load",function(t){var n=e.status,i=n>=200&&n<300||304===n,o=null;try{o=JSON.parse(e.responseText)}catch(u){o=e.responseText}i&&r.hasOwnProperty("success")?r.success(o):r.hasOwnProperty("error")&&r.error(o)});var i=r.url;"get"===r.type.toLowerCase()&&r.data&&(i+="?"+r.data),e.open(r.type,i,!0);for(var o in r.headers)e.setRequestHeader(o,r.headers[o]);e.send(r.data)}}]),t}(),p=new f;e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),u=n(7),c=r(u),a=n(16),s=r(a),l=function(){function t(e){(0,o["default"])(this,t),this.init(e)}return(0,c["default"])(t,[{key:"init",value:function(t){t&&t.audioSrc&&(this.cfg=t,this.createDom(),this.cacheDom(),t.lrcSrc&&(this.getLrc(t.lrcSrc,this.lrcReady.bind(this)),s["default"].showLoading(this.lrcList)),this.reset(),this.setLrcListHeight(),this.initEvents())}},{key:"createDom",value:function(){if(this.cfg.el){var t=s["default"].$(this.cfg.el);"SCRIPT"===t.tagName&&(t=t.parentNode.insertBefore(document.createElement("div"),t)),this.ele=t}else this.ele=document.body.appendChild(document.createElement("div"));this.ele.classList.add("ai-player-container");var e='<div class="player-bg" style="background-image: url(\''+this.cfg.poster+'\');"></div>\n      <section class="ai-player-info">\n        <h2 class="ai-title">'+this.cfg.title+'</h2>\n        <p class="ai-description">'+this.cfg.description+'</p>\n      </section>\n      <section class="ai-player-lrc">\n        <ul class="lrc-list"></ul>\n      </section>\n      <section class="ai-player-ctrl">\n        <button type="button" class="ai-player-prev">pre</button>\n        <button type="button" class="ai-player-play ai-player-pause">play/pause</button>\n        <button type="button" class="ai-player-next">next</button>\n      </section>\n      <audio preload src="'+this.cfg.audioSrc+'"></audio>';this.ele.innerHTML=e}},{key:"cacheDom",value:function(){this.audio=this.ele.querySelector("audio"),this.playEle=this.ele.querySelector(".ai-player-play"),this.lrcList=this.ele.querySelector(".lrc-list")}},{key:"setLrcListHeight",value:function(){var t=this.ele.clientHeight,e=this.ele.querySelector(".ai-player-info").clientHeight,n=this.ele.querySelector(".ai-player-ctrl").clientHeight;this.lrcList.style.height=t-e-n+"px"}},{key:"initEvents",value:function(){var t=this;this.playEle.addEventListener("click",function(e){return t.playEle.className.indexOf("ai-player-pause")>=0?t.play():void t.pause()}),this.audio.addEventListener("timeupdate",this.updateLyric.bind(this)),this.audio.addEventListener("ended",function(e){return t.reset()})}},{key:"getLrc",value:function(t,e){s["default"].ajax({url:t,type:"get",success:function(t){"function"==typeof e&&e(t)},error:function(t){console.error(t)}})}},{key:"lrcReady",value:function(t){this.original={rc:t},this.source=this.parseLrc(t),this.renderLrc(this.lrcList,this.source.lrc),this.lineHeight=this.lrcList.querySelector("li").clientHeight}},{key:"reset",value:function(){this.currentLine=0,this.currentTime=0,this.currentEle&&this.currentEle.classList.remove("on"),this.currentEle=null,this.playEle.classList.add("ai-player-pause"),this.lrcList.scrollTop=0}},{key:"play",value:function(){this.audio.play(),this.playEle.classList.remove("ai-player-pause")}},{key:"pause",value:function(){this.audio.pause(),this.playEle.classList.add("ai-player-pause")}},{key:"parseLrc",value:function(t){var e=t.split("\n"),n={lrc:{},len:0};return 0===e[e.length-1].length&&e.pop(),e.forEach(function(t,e){var r=t.match(/\[(.+)\](.+)?/);if(r&&r[2]){var i=r[1].match(/(\d{2}):(\d{2})/),o=60*~~i[1]+~~i[2];n.lrc[o]={date:r[1],time:o,content:r[2]},n.len++}}),n}},{key:"renderLrc",value:function(t,e){if(t&&e){var n="";for(var r in e){var i=e[r];n+='<li class="item" data-id="'+i.time+'">'+i.content+"</li>"}t.innerHTML=n}}},{key:"updateLyric",value:function(t){var e=t.target,n=~~e.currentTime;this.source.lrc[n]&&this.currentTime!==n&&(this.currentTime=n,this.currentLine++,this.currentEle&&this.currentEle.classList.remove("on"),this.currentEle=this.lrcList.querySelector("li:nth-child("+this.currentLine+")"),this.currentEle.classList.add("on"),this.currentLine>5&&this.currentLine+5<=this.source.len&&(this.lrcList.scrollTop=(this.currentLine-5)*this.lineHeight))}}]),t}();e["default"]=l},function(t,e,n){t.exports={"default":n(20),__esModule:!0}},function(t,e,n){t.exports={"default":n(21),__esModule:!0}},function(t,e,n){n(45),t.exports=n(2).Object.assign},function(t,e,n){n(46);var r=n(2).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(13),i=n(41),o=n(40);t.exports=function(t){return function(e,n,u){var c,a=r(e),s=i(a.length),l=o(u,s);if(t&&n!=n){for(;s>l;)if(c=a[l++],c!=c)return!0}else for(;s>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(5),i=n(4).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(11),i=n(37);t.exports=n(1)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(1)&&!n(3)(function(){return 7!=Object.defineProperty(n(27)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var r=n(35),i=n(33),o=n(36),u=n(42),c=n(10),a=Object.assign;t.exports=!a||n(3)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=a({},t)[n]||Object.keys(a({},e)).join("")!=r})?function(t,e){for(var n=u(t),a=arguments.length,s=1,l=i.f,f=o.f;a>s;)for(var p,d=c(arguments[s++]),h=l?r(d).concat(l(d)):r(d),y=h.length,v=0;y>v;)f.call(d,p=h[v++])&&(n[p]=d[p]);return n}:a},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(29),i=n(13),o=n(24)(!1),u=n(38)("IE_PROTO");t.exports=function(t,e){var n,c=i(t),a=0,s=[];for(n in c)n!=u&&r(c,n)&&s.push(n);for(;e.length>a;)r(c,n=e[a++])&&(~o(s,n)||s.push(n));return s}},function(t,e,n){var r=n(34),i=n(28);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(39)("keys"),i=n(44);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(4),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(12),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(12),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(8);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(9);r(r.S+r.F,"Object",{assign:n(32)})},function(t,e,n){var r=n(9);r(r.S+r.F*!n(1),"Object",{defineProperty:n(11).f})},function(t,e){}]);